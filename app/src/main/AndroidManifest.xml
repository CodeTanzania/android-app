<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="tz.co.codetanzania">

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.CAMERA"/>

    <!-- We're going to use the permission to write to the external public directory.
        The WRITE_EXTERNAL_STORAGE permission implicitly grants the READ_EXTERNAL_STORAGE
        permission. So in this case, it suffices to write just this one liner
     -->
    <uses-permission android:name="android.permission.MANAGE_DOCUMENTS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <uses-permission android:name="android.permission.READ_LOGS" />
    <uses-permission android:name="android.permission.BATTERY_STATS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <!-- The app can still run regardless absence of camera -->
    <uses-feature android:name="android.hardware.camera" android:required="false"/>

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:supportsRtl="true"
        android:theme="@style/AppTheme"
        android:fullBackupContent="true"
        android:name="com.github.codetanzania.MajiFixApp"
        tools:ignore="GoogleAppIndexingWarning">

        <!--
            We need to do reverse geo-coding. The process which takes longer to complete,
            kinda makes it unsuitable to use in UI thread. AsyncTask would do it, but consider
            simple scenarios which might make the requested to be cancelled/re-issued un-necessarily
            such as screen rotation.

            Using IntentService seems our best bet. And here we go
        -->
        <service android:name="com.github.codetanzania.service.FetchAddressIntentService"
            android:exported="false"/>


        <!--
            The Application targeting Android 7.0+, passing file://<path> URIs across package boundary
            causes a FileUriExposedException (Reasonably ok to conceal app internals). In such occasion,
            choosing FileProvider to pass the URIs across boundaries is not an option.
        -->
        <provider
            android:name="android.support.v4.content.FileProvider"
            android:authorities="com.github.codetanzania.fileprovider"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/file_paths" />
        </provider>

        <activity android:name="com.github.codetanzania.ui.activity.RegistrationActivity"
            android:theme="@style/AppThemeNoActionBar"
            android:windowSoftInputMode="stateVisible|adjustPan" />

        <activity android:name="com.github.codetanzania.ui.activity.IssueListActivity"
            android:theme="@style/AppThemeNoActionBar"
            android:label="@string/title_issue_list"/>

        <activity android:name="com.github.codetanzania.ui.activity.SettingsActivity"
            android:theme="@style/AppThemeNoActionBar"
            android:label="@string/settings_title"/>

        <!-- Splash screen activity performs authorization by requesting new token from the server -->
        <activity android:name="com.github.codetanzania.ui.activity.SplashScreenActivity"
            android:theme="@style/SplashTheme">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- Edit user profile -->
        <activity android:name="com.github.codetanzania.ui.activity.EditUserProfileActivity"
            android:theme="@style/AppThemeNoActionBar" />

        <activity android:name="com.github.codetanzania.ui.activity.ErrorActivity"/>

        <activity android:name="com.github.codetanzania.ui.activity.IssueProgressActivity"
            android:theme="@style/AppThemeNoActionBar" />

        <!-- start the activity -->
        <activity android:name="com.github.codetanzania.ui.activity.AppIntroActivity"
            android:theme="@style/AppThemeNoActionBar"/>

        <activity android:name="com.github.codetanzania.ui.activity.MainActivity"
            android:label=""
            android:theme="@style/AppThemeNoActionBar"/>

        <activity android:name="com.github.codetanzania.ui.activity.ReportIssueActivity"
            android:windowSoftInputMode="stateHidden"
            android:theme="@style/AppThemeNoActionBar">

            <!-- Return result(s) back to the parent activity -->
            <intent-filter>
                <action android:name="android.intent.action.SEND"/>
                <category android:name="android.intent.category.DEFAULT"/>
                <data android:mimeType="text/plain"/>
            </intent-filter>

        </activity>

        <meta-data
            android:name="com.google.android.geo.API_KEY"
            android:value="AIzaSyCffLfUtiMHteN7KKyX1sUWx8bRpcvdTwI"/>

        <meta-data android:name="net.hockeyapp.android.appIdentifier"
            android:value="923df58094c24a4090e38d9c8ec9c967" />

        <meta-data
            android:name="io.fabric.ApiKey"
            android:value="bf528a1fe470e56dcaa82142d9685f2e060c64f4" />

    </application>

</manifest>
